{"remainingRequest":"/Users/xmly/Desktop/blog/frontend/node_modules/babel-loader/lib/index.js!/Users/xmly/Desktop/blog/frontend/src/axios.js","dependencies":[{"path":"/Users/xmly/Desktop/blog/frontend/src/axios.js","mtime":1627366640267},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/babel-loader/lib/index.js","mtime":1625477631450}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CmltcG9ydCBFbGVtZW50IGZyb20gImVsZW1lbnQtdWkiOwppbXBvcnQgc3RvcmUgZnJvbSAiLi9zdG9yZSI7CmltcG9ydCByb3V0ZXIgZnJvbSAiLi9yb3V0ZXIiOwpheGlvcy5kZWZhdWx0cy5iYXNlVVJMID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODE4MSc7CmF4aW9zLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgY29uc29sZS5sb2coIuWJjee9ruaLpuaIqiIpOwogIHJldHVybiBjb25maWc7Cn0pOwpheGlvcy5pbnRlcmNlcHRvcnMucmVzcG9uc2UudXNlKGZ1bmN0aW9uIChyZXNwb25zZSkgewogIHZhciByZXMgPSByZXNwb25zZS5kYXRhOwogIGNvbnNvbGUubG9nKCLlkI7nva7mi6bmiKoiKTsKCiAgaWYgKHJlcy5jb2RlID09PSAyMDApIHsKICAgIHJldHVybiByZXNwb25zZTsKICB9IGVsc2UgewogICAgRWxlbWVudC5NZXNzYWdlKHsKICAgICAgbWVzc2FnZTogcmVzcG9uc2UuZGF0YS5tc2csCiAgICAgIHR5cGU6ICdlcnJvcicsCiAgICAgIGR1cmF0aW9uOiAyICogMTAwMAogICAgfSk7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QocmVzcG9uc2UuZGF0YS5tc2cpOwogIH0KfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgY29uc29sZS5sb2coJ2VycicgKyBlcnJvcik7CgogIGlmIChlcnJvci5yZXNwb25zZS5kYXRhKSB7CiAgICBlcnJvci5tZXNzYWdlID0gZXJyb3IucmVzcG9uc2UuZGF0YS5tc2c7CiAgfQoKICBpZiAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzID09PSA0MDEpIHsKICAgIHN0b3JlLmNvbW1pdCgnUkVNT1ZFX0lORk8nKTsKICAgIHJvdXRlci5wdXNoKHsKICAgICAgcGF0aDogJy9sb2dpbicKICAgIH0pOwogICAgZXJyb3IubWVzc2FnZSA9ICfor7fph43mlrDnmbvlvZUnOwogIH0KCiAgaWYgKGVycm9yLnJlc3BvbnNlLnN0YXR1cyA9PT0gNDAzKSB7CiAgICBlcnJvci5tZXNzYWdlID0gJ+adg+mZkOS4jei2s++8jOaXoOazleiuv+mXric7CiAgfQoKICBFbGVtZW50Lk1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogMyAqIDEwMDAKICB9KTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTs="},{"version":3,"sources":["/Users/xmly/Desktop/blog/frontend/src/axios.js"],"names":["axios","Element","store","router","defaults","baseURL","interceptors","request","use","config","console","log","response","res","data","code","Message","message","msg","type","duration","Promise","reject","error","status","commit","push","path"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,OAAP,MAAoB,YAApB;AACA,OAAOC,KAAP,MAAkB,SAAlB;AACA,OAAOC,MAAP,MAAmB,UAAnB;AACAH,KAAK,CAACI,QAAN,CAAeC,OAAf,GAAuB,uBAAvB;AACAL,KAAK,CAACM,YAAN,CAAmBC,OAAnB,CAA2BC,GAA3B,CAA+B,UAAAC,MAAM,EAAI;AACvCC,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;AACA,SAAOF,MAAP;AACD,CAHD;AAIAT,KAAK,CAACM,YAAN,CAAmBM,QAAnB,CAA4BJ,GAA5B,CAAgC,UAAAI,QAAQ,EAAI;AACxC,MAAMC,GAAG,GAAGD,QAAQ,CAACE,IAArB;AACAJ,EAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ;;AACA,MAAIE,GAAG,CAACE,IAAJ,KAAa,GAAjB,EAAsB;AACpB,WAAOH,QAAP;AACD,GAFD,MAEO;AACLX,IAAAA,OAAO,CAACe,OAAR,CAAgB;AACdC,MAAAA,OAAO,EAAEL,QAAQ,CAACE,IAAT,CAAcI,GADT;AAEdC,MAAAA,IAAI,EAAE,OAFQ;AAGdC,MAAAA,QAAQ,EAAE,IAAI;AAHA,KAAhB;AAKA,WAAOC,OAAO,CAACC,MAAR,CAAeV,QAAQ,CAACE,IAAT,CAAcI,GAA7B,CAAP;AACD;AACF,CAbH,EAcE,UAAAK,KAAK,EAAI;AACPb,EAAAA,OAAO,CAACC,GAAR,CAAY,QAAQY,KAApB;;AACA,MAAGA,KAAK,CAACX,QAAN,CAAeE,IAAlB,EAAwB;AACtBS,IAAAA,KAAK,CAACN,OAAN,GAAgBM,KAAK,CAACX,QAAN,CAAeE,IAAf,CAAoBI,GAApC;AACD;;AAED,MAAIK,KAAK,CAACX,QAAN,CAAeY,MAAf,KAA0B,GAA9B,EAAmC;AACjCtB,IAAAA,KAAK,CAACuB,MAAN,CAAa,aAAb;AACAtB,IAAAA,MAAM,CAACuB,IAAP,CAAY;AACVC,MAAAA,IAAI,EAAE;AADI,KAAZ;AAGAJ,IAAAA,KAAK,CAACN,OAAN,GAAgB,OAAhB;AACD;;AACD,MAAIM,KAAK,CAACX,QAAN,CAAeY,MAAf,KAA0B,GAA9B,EAAmC;AACjCD,IAAAA,KAAK,CAACN,OAAN,GAAgB,WAAhB;AACD;;AACDhB,EAAAA,OAAO,CAACe,OAAR,CAAgB;AACdC,IAAAA,OAAO,EAAEM,KAAK,CAACN,OADD;AAEdE,IAAAA,IAAI,EAAE,OAFQ;AAGdC,IAAAA,QAAQ,EAAE,IAAI;AAHA,GAAhB;AAKA,SAAOC,OAAO,CAACC,MAAR,CAAeC,KAAf,CAAP;AACD,CApCH","sourcesContent":["import axios from 'axios'\nimport Element from \"element-ui\";\nimport store from \"./store\";\nimport router from \"./router\";\naxios.defaults.baseURL='http://localhost:8181'\naxios.interceptors.request.use(config => {\n  console.log(\"前置拦截\")\n  return config\n})\naxios.interceptors.response.use(response => {\n    const res = response.data;\n    console.log(\"后置拦截\")\n    if (res.code === 200) {\n      return response\n    } else {\n      Element.Message({\n        message: response.data.msg,\n        type: 'error',\n        duration: 2 * 1000\n      })\n      return Promise.reject(response.data.msg)\n    }\n  },\n  error => {\n    console.log('err' + error)\n    if(error.response.data) {\n      error.message = error.response.data.msg\n    }\n\n    if (error.response.status === 401) {\n      store.commit('REMOVE_INFO');\n      router.push({\n        path: '/login'\n      });\n      error.message = '请重新登录';\n    }\n    if (error.response.status === 403) {\n      error.message = '权限不足，无法访问';\n    }\n    Element.Message({\n      message: error.message,\n      type: 'error',\n      duration: 3 * 1000\n    })\n    return Promise.reject(error)\n  })\n\n"]}]}