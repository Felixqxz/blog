{"remainingRequest":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xmly/Desktop/blog/frontend/src/views/Register.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xmly/Desktop/blog/frontend/src/views/Register.vue","mtime":1627982842999},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/babel-loader/lib/index.js","mtime":1625477631450},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":1626859461208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBtZDUgZnJvbSAianMtbWQ1IjsKaW1wb3J0IGxvZGFzaCBmcm9tICJsb2Rhc2giOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YSgpIHsKICAgIHZhciB2YWxpZGF0ZVBhc3MgPSAocnVsZSwgdmFsdWUsIGNhbGxiYWNrKSA9PiB7CiAgICAgIGlmICh0aGlzLnJ1bGVGb3JtLmNoZWNrUGFzc3dvcmQgIT09ICIiKSB7CiAgICAgICAgdGhpcy4kcmVmcy5ydWxlRm9ybS52YWxpZGF0ZUZpZWxkKCJjaGVja1Bhc3MiKTsKICAgICAgfQogICAgICBjYWxsYmFjaygpOwogICAgfTsKICAgIHZhciB2YWxpZGF0ZVBhc3MyID0gKHJ1bGUsIHZhbHVlLCBjYWxsYmFjaykgPT4gewogICAgICBpZiAodmFsdWUgIT09IHRoaXMucnVsZUZvcm0ucGFzc3dvcmQpIHsKICAgICAgICBjYWxsYmFjayhuZXcgRXJyb3IoIuS4pOasoei+k+WFpeWvhueggeS4jeS4gOiHtCEiKSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgY2FsbGJhY2soKTsKICAgICAgfQogICAgfTsKICAgIHJldHVybiB7CiAgICAgIGxvZ2luRm9ybToge30sCiAgICAgIHJ1bGVGb3JtOiB7CiAgICAgICAgdXNlcm5hbWU6ICIiLAogICAgICAgIHBhc3N3b3JkOiAiIiwKICAgICAgICBjaGVja1Bhc3N3b3JkOiAiIiwKICAgICAgICBlbWFpbDogIiIsCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdXNlcm5hbWU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXnlKjmiLflkI0iLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDMsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLnlKjmiLflkI3plb/luqbkuI3lsI/kuo4gMyDkuKrlrZciLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIHBhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5a+G56CBIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIiwKICAgICAgICAgIH0sCiAgICAgICAgXSwKICAgICAgICBjaGVja1Bhc3N3b3JkOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+35YaN5qyh6L6T5YWl5a+G56CBIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgfSwKICAgICAgICAgIHsKICAgICAgICAgICAgdmFsaWRhdG9yOiB2YWxpZGF0ZVBhc3MyLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgIF0sCiAgICAgICAgZW1haWw6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXpgq7nrrEiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIsCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICB0eXBlOiAiZW1haWwiLAogICAgICAgICAgICBtZXNzYWdlOiAi6YKu566x5qC85byP6ZSZ6K+vIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiLAogICAgICAgICAgfSwKICAgICAgICBdLAogICAgICB9LAogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGNhbGxiYWNrKCkgewogICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL2xvZ2luIiwgdGhpcy5sb2dpbkZvcm0pLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgY29uc3QgdG9rZW4gPSByZXMuaGVhZGVyc1siYXV0aG9yaXphdGlvbiJdOwogICAgICAgIF90aGlzLiRzdG9yZS5jb21taXQoIlNFVF9UT0tFTiIsIHRva2VuKTsKICAgICAgICBfdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVVNFUklORk8iLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9ibG9ncyIpOwogICAgICB9KTsKICAgIH0sCiAgICBhc3luYyBzdWJtaXRGb3JtKGZvcm1OYW1lKSB7CiAgICAgIGNvbnN0IF90aGlzID0gdGhpczsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0udmFsaWRhdGUoKHZhbGlkKSA9PiB7CiAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICB2YXIgZm9ybSA9IGxvZGFzaC5jbG9uZURlZXAodGhpcy5ydWxlRm9ybSk7CiAgICAgICAgICBmb3JtLnBhc3N3b3JkID0gbWQ1KHRoaXMucnVsZUZvcm0ucGFzc3dvcmQpOwogICAgICAgICAgdGhpcy5sb2dpbkZvcm0udXNlcm5hbWUgPSB0aGlzLnJ1bGVGb3JtLnVzZXJuYW1lOwogICAgICAgICAgdGhpcy5sb2dpbkZvcm0ucGFzc3dvcmQgPSB0aGlzLnJ1bGVGb3JtLnBhc3N3b3JkOwoKICAgICAgICAgIC8vIHRoaXMuJGF4aW9zLnBvc3QoIi91c2VyL3NhdmUiLCBmb3JtKQoKICAgICAgICAgIC8vIHRoaXMuJGF4aW9zLnBvc3QoIi9sb2dpbiIsIGxvZ2luRm9ybSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAvLyAgIGNvbnN0IHRva2VuID0gcmVzLmhlYWRlcnNbImF1dGhvcml6YXRpb24iXTsKICAgICAgICAgIC8vICAgX3RoaXMuJHN0b3JlLmNvbW1pdCgiU0VUX1RPS0VOIiwgdG9rZW4pOwogICAgICAgICAgLy8gICBfdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVVNFUklORk8iLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICAgIC8vICAgX3RoaXMuJHJvdXRlci5wdXNoKCIvYmxvZ3MiKTsKICAgICAgICAgIC8vIH0pCgogICAgICAgICAgdGhpcy4kYXhpb3MucG9zdCgiL3VzZXIvc2F2ZSIsIGZvcm0pLnRoZW4oKCkgPT4gewogICAgICAgICAgICAvLyBfdGhpcy4kYXhpb3MucG9zdCgiL2xvZ2luIiwgdGhpcy5sb2dpbkZvcm0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAvLyAgIGNvbnNvbGUubG9nKHJlcyk7CiAgICAgICAgICAgIC8vICAgY29uc3QgdG9rZW4gPSByZXMuaGVhZGVyc1siYXV0aG9yaXphdGlvbiJdOwogICAgICAgICAgICAvLyAgIF90aGlzLiRzdG9yZS5jb21taXQoIlNFVF9UT0tFTiIsIHRva2VuKTsKICAgICAgICAgICAgLy8gICBfdGhpcy4kc3RvcmUuY29tbWl0KCJTRVRfVVNFUklORk8iLCByZXMuZGF0YS5kYXRhKTsKICAgICAgICAgICAgLy8gICBfdGhpcy4kcm91dGVyLnB1c2goIi9ibG9ncyIpOwogICAgICAgICAgICAvLyB9KTsKICAgICAgICAgICAgX3RoaXMuY2FsbGJhY2soKQogICAgICAgICAgfSkKCgoKICAgICAgICB9IGVsc2UgewogICAgICAgICAgY29uc29sZS5sb2coImVycm9yIHN1Ym1pdCEhIik7CiAgICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgICAgfQogICAgICB9KTsKICAgIH0sCiAgICByZXNldEZvcm0oZm9ybU5hbWUpIHsKICAgICAgdGhpcy4kcmVmc1tmb3JtTmFtZV0ucmVzZXRGaWVsZHMoKTsKICAgIH0sCiAgfSwKfTsK"},{"version":3,"sources":["Register.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAwCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Register.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <el-container>\n      <el-header>\n        <el-col :span=\"11\" class=\"link\">\n          <el-link type=\"primary\" href=\"/blogs\" :underline=\"false\">首页</el-link>\n        </el-col>\n        <el-col :span=\"13\"><i class=\"el-icon-s-custom header\"></i>\n          <span class=\"header\"> 注册</span>\n        </el-col>\n      </el-header>\n      <el-main>\n        <el-form :model=\"ruleForm\" status-icon :rules=\"rules\" ref=\"ruleForm\" label-width=\"100px\" class=\"login-form\">\n          <el-form-item label=\"用户名\" prop=\"username\">\n            <el-input type=\"text\" v-model=\"ruleForm.username\" auto-complete=\"off\" @keyup.enter.native=\"submitForm('ruleForm')\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"密码\" prop=\"password\">\n            <el-input type=\"password\" v-model=\"ruleForm.password\" auto-complete=\"off\" @keyup.enter.native=\"submitForm('ruleForm')\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"确认密码\" prop=\"checkPassword\">\n            <el-input type=\"password\" v-model=\"ruleForm.checkPassword\" auto-complete=\"off\" @keyup.enter.native=\"submitForm('ruleForm')\"></el-input>\n          </el-form-item>\n          <el-form-item label=\"邮箱\" prop=\"email\">\n            <el-input type=\"email\" v-model=\"ruleForm.email\" @keyup.enter.native=\"submitForm('ruleForm')\"></el-input>\n          </el-form-item>\n          <el-form-item class=\"form-button\">\n            <el-button type=\"primary\" @click=\"submitForm('ruleForm')\">注册</el-button>\n            <el-button @click=\"resetForm('ruleForm')\">重置</el-button>\n            <br /><br />\n            <router-link to=\"/login\" class=\"jump\">\n              <el-button>已经注册过？请登录</el-button>\n            </router-link>\n          </el-form-item>\n        </el-form>\n      </el-main>\n    </el-container>\n  </div>\n</template>\n\n<script>\nimport md5 from \"js-md5\";\nimport lodash from \"lodash\";\nexport default {\n  data() {\n    var validatePass = (rule, value, callback) => {\n      if (this.ruleForm.checkPassword !== \"\") {\n        this.$refs.ruleForm.validateField(\"checkPass\");\n      }\n      callback();\n    };\n    var validatePass2 = (rule, value, callback) => {\n      if (value !== this.ruleForm.password) {\n        callback(new Error(\"两次输入密码不一致!\"));\n      } else {\n        callback();\n      }\n    };\n    return {\n      loginForm: {},\n      ruleForm: {\n        username: \"\",\n        password: \"\",\n        checkPassword: \"\",\n        email: \"\",\n      },\n      rules: {\n        username: [\n          {\n            required: true,\n            message: \"请输入用户名\",\n            trigger: \"blur\",\n          },\n          {\n            min: 3,\n            message: \"用户名长度不小于 3 个字\",\n            trigger: \"blur\"\n          }\n        ],\n        password: [\n          {\n            required: true,\n            message: \"请输入密码\",\n            trigger: \"blur\",\n          },\n          {\n            validator: validatePass,\n            trigger: \"blur\",\n          },\n        ],\n        checkPassword: [\n          {\n            required: true,\n            message: \"请再次输入密码\",\n            trigger: \"blur\",\n          },\n          {\n            validator: validatePass2,\n            trigger: \"blur\",\n          },\n        ],\n        email: [\n          {\n            required: true,\n            message: \"请输入邮箱\",\n            trigger: \"blur\",\n          },\n          {\n            type: \"email\",\n            message: \"邮箱格式错误\",\n            trigger: \"blur\",\n          },\n        ],\n      },\n    };\n  },\n  methods: {\n    callback() {\n      const _this = this\n      this.$axios.post(\"/login\", this.loginForm).then((res) => {\n        console.log(res);\n        const token = res.headers[\"authorization\"];\n        _this.$store.commit(\"SET_TOKEN\", token);\n        _this.$store.commit(\"SET_USERINFO\", res.data.data);\n        _this.$router.push(\"/blogs\");\n      });\n    },\n    async submitForm(formName) {\n      const _this = this;\n      this.$refs[formName].validate((valid) => {\n        if (valid) {\n          var form = lodash.cloneDeep(this.ruleForm);\n          form.password = md5(this.ruleForm.password);\n          this.loginForm.username = this.ruleForm.username;\n          this.loginForm.password = this.ruleForm.password;\n\n          // this.$axios.post(\"/user/save\", form)\n\n          // this.$axios.post(\"/login\", loginForm).then((res) => {\n          //   console.log(res);\n          //   const token = res.headers[\"authorization\"];\n          //   _this.$store.commit(\"SET_TOKEN\", token);\n          //   _this.$store.commit(\"SET_USERINFO\", res.data.data);\n          //   _this.$router.push(\"/blogs\");\n          // })\n\n          this.$axios.post(\"/user/save\", form).then(() => {\n            // _this.$axios.post(\"/login\", this.loginForm).then((res) => {\n            //   console.log(res);\n            //   const token = res.headers[\"authorization\"];\n            //   _this.$store.commit(\"SET_TOKEN\", token);\n            //   _this.$store.commit(\"SET_USERINFO\", res.data.data);\n            //   _this.$router.push(\"/blogs\");\n            // });\n            _this.callback()\n          })\n\n\n\n        } else {\n          console.log(\"error submit!!\");\n          return false;\n        }\n      });\n    },\n    resetForm(formName) {\n      this.$refs[formName].resetFields();\n    },\n  },\n};\n</script>\n\n<style>\n@import \"../assets/css/container.css\";\n.el-link {\n  font-family: STHeiti;\n}\n</style>\n"]}]}