{"remainingRequest":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xmly/Desktop/blog/frontend/src/views/BlogEdit.vue?vue&type=style&index=0&id=25b085f4&scoped=true&lang=css&","dependencies":[{"path":"/Users/xmly/Desktop/blog/frontend/src/views/BlogEdit.vue","mtime":1627543735646},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/css-loader/dist/cjs.js","mtime":1625477639639},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1626859461208},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/postcss-loader/src/index.js","mtime":1625477639937},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":1626859461208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCi5jb250ZW50IHsKICB0ZXh0LWFsaWduOiBjZW50ZXI7Cn0K"},{"version":3,"sources":["BlogEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuGA;AACA;AACA","file":"BlogEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Header></Header>\n    <div class=\"content\">\n      <el-form ref=\"editForm\" status-icon :model=\"editForm\" :rules=\"rules\" label-width=\"80px\">\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model=\"editForm.title\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"摘要\" prop=\"description\">\n          <el-input v-model=\"editForm.description\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"内容\" prop=\"content\">\n          <mavon-editor v-model=\"editForm.content\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('editForm')\">立即创建</el-button>\n          <el-button>取消</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"../components/Header\";\nexport default {\n  name: \"BlogEdit.vue\",\n  components: { Header },\n  data() {\n    return {\n      editForm: {\n        id: null,\n        username: '',\n        title: '',\n        description: '',\n        content: ''\n      },\n      rules: {\n        title: [\n          {\n            required: true,\n            message: \"请输入标题\",\n            trigger: \"blur\"\n          },\n          {\n            min: 2,\n            max: 50,\n            message: \"长度在 2 到 50 个字符\",\n            trigger: \"blur\"\n          }\n        ],\n        description: [\n          {\n            required: true,\n            message: \"请输入摘要\",\n            trigger: \"blur\"\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    const blogId = this.$route.params.blogId\n    const _this = this\n    if (blogId) {\n      this.$axios.get(\"/blog/\" + blogId).then((res) => {\n        const blog = res.data.data\n        _this.editForm.id = blog.id\n        _this.editForm.username = blog.username\n        _this.editForm.title = blog.title\n        _this.editForm.description = blog.description\n        _this.editForm.content = blog.content\n      })\n    }\n  },\n  methods: {\n     submitForm(formName) {\n        const _this = this\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.$axios.post('/blog/edit', this.editForm, {\n              headers: {\n                \"Authorization\": localStorage.getItem(\"token\")\n              }\n            }).then((res) => {\n              _this.$alert('发布成功', '提示', {\n                confirmButtonText: '确定',\n                callback: action => {\n                  _this.$router.push(\"/blogs\")\n                }\n              });\n            });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        })\n     }\n  }\n}\n</script>\n\n<style scoped>\n.content {\n  text-align: center;\n}\n</style>"]}]}