{"remainingRequest":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xmly/Desktop/blog/frontend/src/views/BlogEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xmly/Desktop/blog/frontend/src/views/BlogEdit.vue","mtime":1627540835825},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/babel-loader/lib/index.js","mtime":1625477631450},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":1626859461208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9IZWFkZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJsb2dFZGl0LnZ1ZSIsCiAgY29tcG9uZW50czogeyBIZWFkZXIgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdEZvcm06IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICB0aXRsZTogJycsCiAgICAgICAgZGVzY3JpcHRpb246ICcnLAogICAgICAgIGNvbnRlbnQ6ICcnCiAgICAgIH0sCiAgICAgIHJ1bGVzOiB7CiAgICAgICAgdGl0bGU6IFsKICAgICAgICAgIHsKICAgICAgICAgICAgcmVxdWlyZWQ6IHRydWUsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLor7fovpPlhaXmoIfpopgiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0sCiAgICAgICAgICB7CiAgICAgICAgICAgIG1pbjogMiwKICAgICAgICAgICAgbWF4OiA1MCwKICAgICAgICAgICAgbWVzc2FnZTogIumVv+W6puWcqCAyIOWIsCA1MCDkuKrlrZfnrKYiLAogICAgICAgICAgICB0cmlnZ2VyOiAiYmx1ciIKICAgICAgICAgIH0KICAgICAgICBdLAogICAgICAgIGRlc2NyaXB0aW9uOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5pGY6KaBIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9CiAgICAgICAgXQogICAgICB9CiAgICB9CiAgfSwKICBjcmVhdGVkKCkgewogICAgY29uc3QgYmxvZ0lkID0gdGhpcy4kcm91dGUucGFyYW1zLmJsb2dJZAogICAgY29uc3QgX3RoaXMgPSB0aGlzCiAgICBpZiAoYmxvZ0lkKSB7CiAgICAgIHRoaXMuJGF4aW9zLmdldCgiL2Jsb2cvIiArIGJsb2dJZCkudGhlbigocmVzKSA9PiB7CiAgICAgICAgY29uc3QgYmxvZyA9IHJlcy5kYXRhLmRhdGEKICAgICAgICBfdGhpcy5lZGl0Rm9ybS5pZCA9IGJsb2cuaWQKICAgICAgICBfdGhpcy5lZGl0Rm9ybS50aXRsZSA9IGJsb2cudGl0bGUKICAgICAgICBfdGhpcy5lZGl0Rm9ybS5kZXNjcmlwdGlvbiA9IGJsb2cuZGVzY3JpcHRpb24KICAgICAgICBfdGhpcy5lZGl0Rm9ybS5jb250ZW50ID0gYmxvZy5jb250ZW50CiAgICAgIH0pCiAgICB9CiAgfSwKICBtZXRob2RzOiB7CiAgICAgc3VibWl0Rm9ybShmb3JtTmFtZSkgewogICAgICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgICAgIHRoaXMuJHJlZnNbZm9ybU5hbWVdLnZhbGlkYXRlKCh2YWxpZCkgPT4gewogICAgICAgICAgaWYgKHZhbGlkKSB7CiAgICAgICAgICAgIGNvbnNvbGUubG9nKHRoaXMuZWRpdEZvcm0pCiAgICAgICAgICAgIHRoaXMuJGF4aW9zLnBvc3QoJy9ibG9nL2VkaXQnLCB0aGlzLmVkaXRGb3JtLCB7CiAgICAgICAgICAgICAgaGVhZGVyczogewogICAgICAgICAgICAgICAgIkF1dGhvcml6YXRpb24iOiBsb2NhbFN0b3JhZ2UuZ2V0SXRlbSgidG9rZW4iKQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfSkudGhlbigocmVzKSA9PiB7CiAgICAgICAgICAgICAgX3RoaXMuJGFsZXJ0KCflj5HluIPmiJDlip8nLCAn5o+Q56S6JywgewogICAgICAgICAgICAgICAgY29uZmlybUJ1dHRvblRleHQ6ICfnoa7lrponLAogICAgICAgICAgICAgICAgY2FsbGJhY2s6IGFjdGlvbiA9PiB7CiAgICAgICAgICAgICAgICAgIF90aGlzLiRyb3V0ZXIucHVzaCgiL2Jsb2dzIikKICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgfSk7CiAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKTsKICAgICAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICAgICAgfQogICAgICAgIH0pCiAgICAgfQogIH0KfQo="},{"version":3,"sources":["BlogEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div>\n    <Header></Header>\n    <div class=\"content\">\n      <el-form ref=\"editForm\" status-icon :model=\"editForm\" :rules=\"rules\" label-width=\"80px\">\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model=\"editForm.title\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"摘要\" prop=\"description\">\n          <el-input v-model=\"editForm.description\" clearable></el-input>\n        </el-form-item>\n        <el-form-item label=\"内容\" prop=\"content\">\n          <mavon-editor v-model=\"editForm.content\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('editForm')\">立即创建</el-button>\n          <el-button>取消</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"../components/Header\";\nexport default {\n  name: \"BlogEdit.vue\",\n  components: { Header },\n  data() {\n    return {\n      editForm: {\n        id: null,\n        title: '',\n        description: '',\n        content: ''\n      },\n      rules: {\n        title: [\n          {\n            required: true,\n            message: \"请输入标题\",\n            trigger: \"blur\"\n          },\n          {\n            min: 2,\n            max: 50,\n            message: \"长度在 2 到 50 个字符\",\n            trigger: \"blur\"\n          }\n        ],\n        description: [\n          {\n            required: true,\n            message: \"请输入摘要\",\n            trigger: \"blur\"\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    const blogId = this.$route.params.blogId\n    const _this = this\n    if (blogId) {\n      this.$axios.get(\"/blog/\" + blogId).then((res) => {\n        const blog = res.data.data\n        _this.editForm.id = blog.id\n        _this.editForm.title = blog.title\n        _this.editForm.description = blog.description\n        _this.editForm.content = blog.content\n      })\n    }\n  },\n  methods: {\n     submitForm(formName) {\n        const _this = this\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            console.log(this.editForm)\n            this.$axios.post('/blog/edit', this.editForm, {\n              headers: {\n                \"Authorization\": localStorage.getItem(\"token\")\n              }\n            }).then((res) => {\n              _this.$alert('发布成功', '提示', {\n                confirmButtonText: '确定',\n                callback: action => {\n                  _this.$router.push(\"/blogs\")\n                }\n              });\n            });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        })\n     }\n  }\n}\n</script>\n\n<style scoped>\n.content {\n  text-align: center;\n}\n</style>"]}]}