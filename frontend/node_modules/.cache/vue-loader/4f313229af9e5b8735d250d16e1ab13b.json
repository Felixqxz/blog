{"remainingRequest":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xmly/Desktop/blog/frontend/src/views/BlogEdit.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/xmly/Desktop/blog/frontend/src/views/BlogEdit.vue","mtime":1628140969872},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/babel-loader/lib/index.js","mtime":1625477631450},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":1626859461208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBIZWFkZXIgZnJvbSAiLi4vY29tcG9uZW50cy9IZWFkZXIiOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZTogIkJsb2dFZGl0LnZ1ZSIsCiAgY29tcG9uZW50czogeyBIZWFkZXIgfSwKICBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZWRpdEZvcm06IHsKICAgICAgICBpZDogbnVsbCwKICAgICAgICB1c2VybmFtZTogJycsCiAgICAgICAgdGl0bGU6ICcnLAogICAgICAgIGRlc2NyaXB0aW9uOiAnJywKICAgICAgICBjb250ZW50OiAnJwogICAgICB9LAogICAgICBydWxlczogewogICAgICAgIHRpdGxlOiBbCiAgICAgICAgICB7CiAgICAgICAgICAgIHJlcXVpcmVkOiB0cnVlLAogICAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWl5qCH6aKYIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9LAogICAgICAgICAgewogICAgICAgICAgICBtaW46IDIsCiAgICAgICAgICAgIG1heDogNTAsCiAgICAgICAgICAgIG1lc3NhZ2U6ICLplb/luqblnKggMiDliLAgNTAg5Liq5a2X56ymIiwKICAgICAgICAgICAgdHJpZ2dlcjogImJsdXIiCiAgICAgICAgICB9CiAgICAgICAgXSwKICAgICAgICBkZXNjcmlwdGlvbjogWwogICAgICAgICAgewogICAgICAgICAgICByZXF1aXJlZDogdHJ1ZSwKICAgICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpeaRmOimgSIsCiAgICAgICAgICAgIHRyaWdnZXI6ICJibHVyIgogICAgICAgICAgfQogICAgICAgIF0KICAgICAgfQogICAgfQogIH0sCiAgY3JlYXRlZCgpIHsKICAgIGNvbnN0IGJsb2dJZCA9IHRoaXMuJHJvdXRlLnBhcmFtcy5ibG9nSWQKICAgIGNvbnN0IF90aGlzID0gdGhpcwogICAgaWYgKGJsb2dJZCkgewogICAgICB0aGlzLiRheGlvcy5nZXQoIi9ibG9nLyIgKyBibG9nSWQpLnRoZW4oKHJlcykgPT4gewogICAgICAgIGNvbnN0IGJsb2cgPSByZXMuZGF0YS5kYXRhCiAgICAgICAgX3RoaXMuZWRpdEZvcm0uaWQgPSBibG9nLmlkCiAgICAgICAgX3RoaXMuZWRpdEZvcm0udXNlcm5hbWUgPSBibG9nLnVzZXJuYW1lCiAgICAgICAgX3RoaXMuZWRpdEZvcm0udGl0bGUgPSBibG9nLnRpdGxlCiAgICAgICAgX3RoaXMuZWRpdEZvcm0uZGVzY3JpcHRpb24gPSBibG9nLmRlc2NyaXB0aW9uCiAgICAgICAgX3RoaXMuZWRpdEZvcm0uY29udGVudCA9IGJsb2cuY29udGVudAogICAgICB9KQogICAgfQogIH0sCiAgbWV0aG9kczogewogICAgIHN1Ym1pdEZvcm0oZm9ybU5hbWUpIHsKICAgICAgICBjb25zdCBfdGhpcyA9IHRoaXMKICAgICAgICB0aGlzLiRyZWZzW2Zvcm1OYW1lXS52YWxpZGF0ZSgodmFsaWQpID0+IHsKICAgICAgICAgIGlmICh2YWxpZCkgewogICAgICAgICAgICB0aGlzLiRheGlvcy5wb3N0KCcvYmxvZy9lZGl0JywgdGhpcy5lZGl0Rm9ybSwgewogICAgICAgICAgICAgIGhlYWRlcnM6IHsKICAgICAgICAgICAgICAgICJBdXRob3JpemF0aW9uIjogbG9jYWxTdG9yYWdlLmdldEl0ZW0oInRva2VuIikKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0pLnRoZW4oKHJlcykgPT4gewogICAgICAgICAgICAgIF90aGlzLiRhbGVydCgn5Y+R5biD5oiQ5YqfJywgJ+aPkOekuicsIHsKICAgICAgICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywKICAgICAgICAgICAgICAgIGNhbGxiYWNrOiBhY3Rpb24gPT4gewogICAgICAgICAgICAgICAgICBfdGhpcy4kcm91dGVyLnB1c2goIi9ibG9ncyIpCiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgY29uc29sZS5sb2coJ2Vycm9yIHN1Ym1pdCEhJyk7CiAgICAgICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgICAgIH0KICAgICAgICB9KQogICAgIH0KICB9Cn0K"},{"version":3,"sources":["BlogEdit.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;AA0BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"BlogEdit.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"blog-edit\">\n    <Header></Header>\n    <br>\n    <div class=\"content\">\n      <el-form ref=\"editForm\" status-icon :model=\"editForm\" :rules=\"rules\" label-width=\"70px\">\n        <el-form-item label=\"标题\" prop=\"title\">\n          <el-input v-model=\"editForm.title\"></el-input>\n        </el-form-item>\n        <el-form-item label=\"摘要\" prop=\"description\">\n          <el-input v-model=\"editForm.description\" clearable></el-input>\n        </el-form-item>\n        \n        <el-form-item label=\"内容\" prop=\"content\">\n          <mavon-editor v-model=\"editForm.content\" />\n        </el-form-item>\n        <el-form-item>\n          <el-button type=\"primary\" @click=\"submitForm('editForm')\">立即创建</el-button>\n          <el-button>取消</el-button>\n        </el-form-item>\n      </el-form>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"../components/Header\";\nexport default {\n  name: \"BlogEdit.vue\",\n  components: { Header },\n  data() {\n    return {\n      editForm: {\n        id: null,\n        username: '',\n        title: '',\n        description: '',\n        content: ''\n      },\n      rules: {\n        title: [\n          {\n            required: true,\n            message: \"请输入标题\",\n            trigger: \"blur\"\n          },\n          {\n            min: 2,\n            max: 50,\n            message: \"长度在 2 到 50 个字符\",\n            trigger: \"blur\"\n          }\n        ],\n        description: [\n          {\n            required: true,\n            message: \"请输入摘要\",\n            trigger: \"blur\"\n          }\n        ]\n      }\n    }\n  },\n  created() {\n    const blogId = this.$route.params.blogId\n    const _this = this\n    if (blogId) {\n      this.$axios.get(\"/blog/\" + blogId).then((res) => {\n        const blog = res.data.data\n        _this.editForm.id = blog.id\n        _this.editForm.username = blog.username\n        _this.editForm.title = blog.title\n        _this.editForm.description = blog.description\n        _this.editForm.content = blog.content\n      })\n    }\n  },\n  methods: {\n     submitForm(formName) {\n        const _this = this\n        this.$refs[formName].validate((valid) => {\n          if (valid) {\n            this.$axios.post('/blog/edit', this.editForm, {\n              headers: {\n                \"Authorization\": localStorage.getItem(\"token\")\n              }\n            }).then((res) => {\n              _this.$alert('发布成功', '提示', {\n                confirmButtonText: '确定',\n                callback: action => {\n                  _this.$router.push(\"/blogs\")\n                }\n              });\n            });\n          } else {\n            console.log('error submit!!');\n            return false;\n          }\n        })\n     }\n  }\n}\n</script>\n\n<style scoped>\n\n.el-form {\n  margin: 0 100px 0 50px;\n  text-align: center;\n}\n</style>"]}]}