{"remainingRequest":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/xmly/Desktop/blog/frontend/src/views/BlogDetail.vue?vue&type=style&index=0&id=6081ba66&scoped=true&lang=css&","dependencies":[{"path":"/Users/xmly/Desktop/blog/frontend/src/views/BlogDetail.vue","mtime":1628146255694},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/css-loader/dist/cjs.js","mtime":1625477639639},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/loaders/stylePostLoader.js","mtime":1626859461208},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/postcss-loader/src/index.js","mtime":1625477639937},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/cache-loader/dist/cjs.js","mtime":1625477632720},{"path":"/Users/xmly/Desktop/blog/frontend/node_modules/vue-loader/lib/index.js","mtime":1626859461208}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgouYmxvZyB7CiAgYm94LXNoYWRvdzogMCAycHggNHB4IHJnYmEoMCwgMCwgMCwgMC4xMiksIDAgMCA2cHggcmdiYSgwLCAwLCAwLCAwLjA0KTsKICBtaW4taGVpZ2h0OiA3MDBweDsKICBwYWRkaW5nOiAyMHB4IDE1cHg7CiAgdGV4dC1hbGlnbjogY2VudGVyOwogIG1hcmdpbjogMCAxMDBweCAwIDEwMHB4Owp9CgouYmxvZy10aXRsZSB7CiAgbWFyZ2luOiAwIGF1dG87CiAgdGV4dC1hbGlnbjogY2VudGVyOwp9Cg=="},{"version":3,"sources":["BlogDetail.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA+FA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"BlogDetail.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"blog-detail\">\n    <Header></Header>\n    <br>\n    <div class=\"blog\">\n      <div class=\"blog-title\">\n        <h1>{{blog.title}}</h1>\n        <h4>{{blog.description}}</h4>\n        <p> 作者：{{blog.username}} &nbsp;&nbsp;\n          <el-link icon=\"el-icon-edit\" v-if=\"ownBlog\">\n            <router-link :to=\"{name: 'BlogEdit', params: {blogId: blog.id}}\">\n              编辑\n            </router-link>\n          </el-link>\n          &nbsp;\n          <el-link icon=\"el-icon-delete\" v-if=\"ownBlog\" :underline=\"false\">\n            <el-button type=\"text\" @click=\"deleteBlog\">删除</el-button>\n          </el-link>\n        </p>\n      </div>\n      <el-divider></el-divider>\n      <div class=\"markdown-body\" v-html=\"blog.content\"></div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport Header from \"../components/Header\";\nimport \"github-markdown-css\";\n\nexport default {\n  name: \"BlogDetail.vue\",\n  components: { Header },\n  data() {\n    return {\n      blog: {\n        userId: null,\n        username: '用户名',\n        title: '标题',\n        description: '摘要',\n        content: ''\n      },\n      ownBlog: false\n    }\n  },\n  created() {\n    const blogId = this.$route.params.blogId\n    const _this = this\n    this.$axios.get(\"/blog/\" + blogId).then((res) => {\n      console.log(res.data.data)\n      const blog = res.data.data\n      _this.blog.id = blog.id\n      _this.blog.username = blog.username\n      _this.blog.description = blog.description\n      _this.blog.title = blog.title\n\n      var MarkdownIt = require(\"markdown-it\")\n      var md = new MarkdownIt()\n\n      var result = md.render(blog.content)\n      _this.blog.content = result\n\n      _this.ownBlog = (blog.userId === _this.$store.getters.getUser.id)\n    })\n  },\n  methods: {\n    deleteBlog() {\n      const _this = this\n      this.$confirm('此操作将永久删除该文档, 是否继续?', '提示', {\n        confirmButtonText: '确定',\n        cancelButtonText: '取消',\n        type: 'warning'\n      }).then(async () => {\n        await _this.$axios.post(\"/blog/delete\", this.blog, {\n            headers: {\n                \"Authorization\": localStorage.getItem(\"token\")\n              }\n        })\n        this.$message({\n          type: 'success',\n          message: '删除成功!'\n        });\n        _this.$router.push(\"/blogs\")\n      }).catch(() => {\n        this.$message({\n          type: 'info',\n          message: '已取消删除'\n        });\n      });\n    }\n  }\n}\n</script>\n\n<style scoped>\n.blog {\n  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.12), 0 0 6px rgba(0, 0, 0, 0.04);\n  min-height: 700px;\n  padding: 20px 15px;\n  text-align: center;\n  margin: 0 100px 0 100px;\n}\n\n.blog-title {\n  margin: 0 auto;\n  text-align: center;\n}\n</style>"]}]}